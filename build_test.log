
‚ùå ERROR: 'option_symbol'
Traceback (most recent call last):
  File "/Users/lutherhart/Library/Mobile Documents/com~apple~CloudDocs/Quant Projects/lmhv_01/massive_options_smoke/.venv/lib/python3.10/site-packages/pandas/core/indexes/base.py", line 3812, in get_loc
    return self._engine.get_loc(casted_key)
  File "pandas/_libs/index.pyx", line 167, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/index.pyx", line 196, in pandas._libs.index.IndexEngine.get_loc
  File "pandas/_libs/hashtable_class_helper.pxi", line 7088, in pandas._libs.hashtable.PyObjectHashTable.get_item
  File "pandas/_libs/hashtable_class_helper.pxi", line 7096, in pandas._libs.hashtable.PyObjectHashTable.get_item
KeyError: 'option_symbol'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/lutherhart/Library/Mobile Documents/com~apple~CloudDocs/Quant Projects/lmhv_01/build_chain.py", line 96, in main
    result = build_chain(
  File "/Users/lutherhart/Library/Mobile Documents/com~apple~CloudDocs/Quant Projects/lmhv_01/backtest_builder/chain_builder.py", line 191, in build_chain
    quotes = fetch_quotes_for_symbols(client, near["option_symbol"].unique().tolist(), as_of)
  File "/Users/lutherhart/Library/Mobile Documents/com~apple~CloudDocs/Quant Projects/lmhv_01/massive_options_smoke/.venv/lib/python3.10/site-packages/pandas/core/frame.py", line 4113, in __getitem__
    indexer = self.columns.get_loc(key)
  File "/Users/lutherhart/Library/Mobile Documents/com~apple~CloudDocs/Quant Projects/lmhv_01/massive_options_smoke/.venv/lib/python3.10/site-packages/pandas/core/indexes/base.py", line 3819, in get_loc
    raise KeyError(key) from err
KeyError: 'option_symbol'

======================================================================
Building Historical Options Chain
======================================================================
Underlier:  QQQ
Date:       2025-05-15
Cut:        16:00:00 America/New_York
DTE window: 0-30 days
Risk-free:  0.0200
Div yield:  0.0000
Output:     /Users/lutherhart/Library/Mobile Documents/com~apple~CloudDocs/Quant Projects/lmhv_01/backtests/QQQ/2025-05-15
======================================================================

